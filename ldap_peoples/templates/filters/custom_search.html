{% load i18n admin_urls %}
{% load static %}

<script>
(function($){
     })(django.jQuery);

function build_filter(){
    // ?custom_search=filter,mail__exact,peppelinux%40yahoo.it
    cs_list = []

    for (i = 0; i < 20; i++) {
      // console.log(i);
      if (!document.getElementsByClassName('cs_name')[i]) { break;}
      search = [document.getElementsByClassName('cs_name')[i].value,
                document.getElementsByClassName('cs_action')[i].value,
                document.getElementsByClassName('cs_operator')[i].value,
                document.getElementsByClassName('cs_value')[i].value]
      console.log(search);
      cs_list.push(search.join(','));
    }

    href = cs_list.join('||');
    console.log(cs_list);
    console.log(href);
    window.location = href;
}

</script>

<div>
    <h3 id="ldap_search" style="">LDAP {% trans "Search" %}</h3>

    <div class="cs_container" style="padding: 15px">
        <select name="cs_name_0" class="cs_name" style="margin-right: 13px;">
        {% for choice in choices %}
            <option value="{{ choice.query_string|iriencode }}">{{ choice.display }}</option>
        {% endfor %}
        </select>

        <select name="cs_operator_0" class="cs_operator" required  style="margin-right: 13px;">
          <option value="exact">exact</option>
          <option value="contains">contains</option>
          <option value="startswith">startswith</option>
          <option value="endswith">endswith</option>
        </select>

        <select name="cs_action_0" class="cs_action" required  style="margin-right: 13px;">
          <option value="filter">filter</option>
          <option value="exclude">exclude</option>
        </select>

        <input name="cs_value_0" class="cs_value" placeholder="{% trans "value" %}" type="text"  >

        <br>
        <div class="controls">
<!--
            <input type="button" value="{% trans 'Add' %}">
-->
            <input type="submit" onclick="javascript:build_filter();" value="{% trans 'Search' %}">
        </div>
    </div>
</div>
